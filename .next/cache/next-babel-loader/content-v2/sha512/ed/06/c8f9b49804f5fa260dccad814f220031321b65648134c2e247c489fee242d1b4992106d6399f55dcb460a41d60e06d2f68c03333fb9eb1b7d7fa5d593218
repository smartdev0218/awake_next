{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\projects\\\\4.23\\\\awake-nextjs-refactored1\\\\src\\\\components\\\\form\\\\verification-form\\\\index.tsx\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './styles.module.css';\nconst KEY_CODE = {\n  backspace: 8,\n  left: 37,\n  up: 38,\n  right: 39,\n  down: 40\n};\nexport default class ReactCodeInput extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"__clearvalues__\", () => {\n      const {\n        fields\n      } = this.props;\n      this.setState({\n        values: Array(fields).fill('')\n      });\n      this.iRefs[0].current.focus();\n    });\n\n    _defineProperty(this, \"triggerChange\", (values = this.state.values) => {\n      const {\n        onChange,\n        onComplete,\n        fields\n      } = this.props;\n      const val = values.join('');\n      onChange && onChange(val);\n\n      if (onComplete && val.length >= fields) {\n        onComplete(val);\n      }\n    });\n\n    _defineProperty(this, \"onChange\", e => {\n      const index = parseInt(e.target.dataset.id);\n\n      if (this.props.type === 'number') {\n        e.target.value = e.target.value.replace(/[^\\d]/gi, '');\n      } // this.handleKeys[index] = false;\n\n\n      if (e.target.value === '' || this.props.type === 'number' && !e.target.validity.valid) {\n        return;\n      }\n\n      const {\n        fields\n      } = this.props;\n      let next;\n      const value = e.target.value;\n      let {\n        values\n      } = this.state;\n      values = Object.assign([], values);\n\n      if (value.length > 1) {\n        let nextIndex = value.length + index - 1;\n\n        if (nextIndex >= fields) {\n          nextIndex = fields - 1;\n        }\n\n        next = this.iRefs[nextIndex];\n        const split = value.split('');\n        split.forEach((item, i) => {\n          const cursor = index + i;\n\n          if (cursor < fields) {\n            values[cursor] = item;\n          }\n        });\n        this.setState({\n          values\n        });\n      } else {\n        next = this.iRefs[index + 1];\n        values[index] = value;\n        this.setState({\n          values\n        });\n      }\n\n      if (next) {\n        next.current.focus();\n        next.current.select();\n      }\n\n      this.triggerChange(values);\n    });\n\n    _defineProperty(this, \"onKeyDown\", e => {\n      const index = parseInt(e.target.dataset.id);\n      const prevIndex = index - 1;\n      const nextIndex = index + 1;\n      const prev = this.iRefs[prevIndex];\n      const next = this.iRefs[nextIndex];\n\n      switch (e.keyCode) {\n        case KEY_CODE.backspace:\n          e.preventDefault();\n          const vals = [...this.state.values];\n\n          if (this.state.values[index]) {\n            vals[index] = '';\n            this.setState({\n              values: vals\n            });\n            this.triggerChange(vals);\n          } else if (prev) {\n            vals[prevIndex] = '';\n            prev.current.focus();\n            this.setState({\n              values: vals\n            });\n            this.triggerChange(vals);\n          }\n\n          break;\n\n        case KEY_CODE.left:\n          e.preventDefault();\n\n          if (prev) {\n            prev.current.focus();\n          }\n\n          break;\n\n        case KEY_CODE.right:\n          e.preventDefault();\n\n          if (next) {\n            next.current.focus();\n          }\n\n          break;\n\n        case KEY_CODE.up:\n        case KEY_CODE.down:\n          e.preventDefault();\n          break;\n\n        default:\n          // this.handleKeys[index] = true;\n          break;\n      }\n    });\n\n    _defineProperty(this, \"onFocus\", e => {\n      e.target.select(e);\n    });\n\n    const {\n      fields: _fields,\n      values: _values\n    } = props;\n\n    let _vals;\n\n    console.log(_fields);\n    let autoFocusIndex = 0;\n\n    if (_values && _values.length) {\n      _vals = [];\n\n      for (let i = 0; i < _fields; i++) {\n        _vals.push(_values[i] || '');\n      }\n\n      autoFocusIndex = _values.length >= _fields ? 0 : _values.length;\n    } else {\n      _vals = Array(_fields).fill('');\n    }\n\n    this.state = {\n      values: _vals,\n      autoFocusIndex\n    };\n    this.iRefs = [];\n\n    for (let i = 0; i < _fields; i++) {\n      this.iRefs.push( /*#__PURE__*/React.createRef());\n    }\n\n    this.id = +new Date(); // this.handleKeys = Array(fields).fill(false);\n  }\n  /**\r\n   * Clear all field value & focus first field\r\n   */\n\n\n  render() {\n    const {\n      values,\n      autoFocusIndex\n    } = this.state;\n    const {\n      loading,\n      title,\n      fieldHeight,\n      fieldWidth,\n      fields,\n      autoFocus,\n      className,\n      type\n    } = this.props;\n    const INPUT_STYLE = {\n      width: fieldWidth,\n      height: fieldHeight,\n      border: 'solid 1px',\n      margin: '0 10px',\n      borderRadius: '13px'\n    };\n    const ROOT_STYLE = {\n      width: fields * fieldWidth + 100,\n      margin: '26px 0'\n    };\n    const LOADING_STYLE = {\n      lineHeight: `${fieldHeight}px`\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${styles['react-code-input-container']} ${className}`,\n      style: ROOT_STYLE,\n      children: [title && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles['title'],\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles['react-code-input'],\n        children: values.map((value, index) => /*#__PURE__*/_jsxDEV(\"input\", {\n          type: type === 'number' ? 'tel' : type,\n          pattern: type === 'number' ? '[0-9]*' : null,\n          autoFocus: autoFocus && index === autoFocusIndex,\n          style: INPUT_STYLE,\n          \"data-id\": index,\n          value: value,\n          id: this.props.id ? `${this.props.id}-${index}` : null,\n          ref: this.iRefs[index],\n          onChange: this.onChange,\n          onKeyDown: this.onKeyDown // onKeyUp={this.onKeyUp}\n          ,\n          onFocus: this.onFocus,\n          disabled: this.props.disabled,\n          required: this.props.required,\n          placeholder: this.props.placeholder[index]\n        }, `${this.id}-${index}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles['loading'],\n        style: LOADING_STYLE,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles['blur']\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n          className: styles['spin'],\n          viewBox: \"0 0 1024 1024\",\n          \"data-icon\": \"loading\",\n          width: \"1em\",\n          height: \"1em\",\n          fill: \"currentColor\",\n          \"aria-hidden\": \"true\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            fill: \"#006fff\",\n            d: \"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\n_defineProperty(ReactCodeInput, \"propTypes\", {\n  type: PropTypes.oneOf(['text', 'number']),\n  onChange: PropTypes.func,\n  onComplete: PropTypes.func,\n  fields: PropTypes.number,\n  loading: PropTypes.bool,\n  title: PropTypes.string,\n  fieldWidth: PropTypes.number,\n  id: PropTypes.string,\n  fieldHeight: PropTypes.number,\n  autoFocus: PropTypes.bool,\n  className: PropTypes.string,\n  values: PropTypes.arrayOf(PropTypes.string),\n  disabled: PropTypes.bool,\n  required: PropTypes.bool,\n  placeholder: PropTypes.arrayOf(PropTypes.string)\n});\n\n_defineProperty(ReactCodeInput, \"defaultProps\", {\n  type: 'number',\n  fields: 6,\n  fieldWidth: 58,\n  fieldHeight: 54,\n  autoFocus: true,\n  disabled: false,\n  required: false,\n  placeholder: []\n});","map":{"version":3,"sources":["E:/projects/4.23/awake-nextjs-refactored1/src/components/form/verification-form/index.tsx"],"names":["React","Component","PropTypes","styles","KEY_CODE","backspace","left","up","right","down","ReactCodeInput","constructor","props","fields","setState","values","Array","fill","iRefs","current","focus","state","onChange","onComplete","val","join","length","e","index","parseInt","target","dataset","id","type","value","replace","validity","valid","next","Object","assign","nextIndex","split","forEach","item","i","cursor","select","triggerChange","prevIndex","prev","keyCode","preventDefault","vals","console","log","autoFocusIndex","push","createRef","Date","render","loading","title","fieldHeight","fieldWidth","autoFocus","className","INPUT_STYLE","width","height","border","margin","borderRadius","ROOT_STYLE","LOADING_STYLE","lineHeight","map","onKeyDown","onFocus","disabled","required","placeholder","oneOf","func","number","bool","string","arrayOf"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport styles from './styles.module.css'\r\n\r\nconst KEY_CODE = {\r\n  backspace: 8,\r\n  left: 37,\r\n  up: 38,\r\n  right: 39,\r\n  down: 40,\r\n}\r\n\r\nexport default class ReactCodeInput extends Component {\r\n  static propTypes = {\r\n    type: PropTypes.oneOf(['text', 'number']),\r\n    onChange: PropTypes.func,\r\n    onComplete: PropTypes.func,\r\n    fields: PropTypes.number,\r\n    loading: PropTypes.bool,\r\n    title: PropTypes.string,\r\n    fieldWidth: PropTypes.number,\r\n    id: PropTypes.string,\r\n    fieldHeight: PropTypes.number,\r\n    autoFocus: PropTypes.bool,\r\n    className: PropTypes.string,\r\n    values: PropTypes.arrayOf(PropTypes.string),\r\n    disabled: PropTypes.bool,\r\n    required: PropTypes.bool,\r\n    placeholder: PropTypes.arrayOf(PropTypes.string),\r\n  }\r\n\r\n  static defaultProps = {\r\n    type: 'number',\r\n    fields: 6,\r\n    fieldWidth: 58,\r\n    fieldHeight: 54,\r\n    autoFocus: true,\r\n    disabled: false,\r\n    required: false,\r\n    placeholder: [],\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    const { fields, values } = props\r\n    let vals\r\n    console.log(fields)\r\n    let autoFocusIndex = 0\r\n    if (values && values.length) {\r\n      vals = []\r\n      for (let i = 0; i < fields; i++) {\r\n        vals.push(values[i] || '')\r\n      }\r\n      autoFocusIndex = values.length >= fields ? 0 : values.length\r\n    } else {\r\n      vals = Array(fields).fill('')\r\n    }\r\n    this.state = { values: vals, autoFocusIndex }\r\n\r\n    this.iRefs = []\r\n    for (let i = 0; i < fields; i++) {\r\n      this.iRefs.push(React.createRef())\r\n    }\r\n    this.id = +new Date()\r\n\r\n    // this.handleKeys = Array(fields).fill(false);\r\n  }\r\n\r\n  /**\r\n   * Clear all field value & focus first field\r\n   */\r\n  __clearvalues__ = () => {\r\n    const { fields } = this.props\r\n    this.setState({ values: Array(fields).fill('') })\r\n    this.iRefs[0].current.focus()\r\n  }\r\n\r\n  triggerChange = (values = this.state.values) => {\r\n    const { onChange, onComplete, fields } = this.props\r\n    const val = values.join('')\r\n    onChange && onChange(val)\r\n    if (onComplete && val.length >= fields) {\r\n      onComplete(val)\r\n    }\r\n  }\r\n\r\n  onChange = (e) => {\r\n    const index = parseInt(e.target.dataset.id)\r\n    if (this.props.type === 'number') {\r\n      e.target.value = e.target.value.replace(/[^\\d]/gi, '')\r\n    }\r\n    // this.handleKeys[index] = false;\r\n    if (\r\n      e.target.value === '' ||\r\n      (this.props.type === 'number' && !e.target.validity.valid)\r\n    ) {\r\n      return\r\n    }\r\n    const { fields } = this.props\r\n    let next\r\n    const value = e.target.value\r\n    let { values } = this.state\r\n    values = Object.assign([], values)\r\n    if (value.length > 1) {\r\n      let nextIndex = value.length + index - 1\r\n      if (nextIndex >= fields) {\r\n        nextIndex = fields - 1\r\n      }\r\n      next = this.iRefs[nextIndex]\r\n      const split = value.split('')\r\n      split.forEach((item, i) => {\r\n        const cursor = index + i\r\n        if (cursor < fields) {\r\n          values[cursor] = item\r\n        }\r\n      })\r\n      this.setState({ values })\r\n    } else {\r\n      next = this.iRefs[index + 1]\r\n      values[index] = value\r\n      this.setState({ values })\r\n    }\r\n\r\n    if (next) {\r\n      next.current.focus()\r\n      next.current.select()\r\n    }\r\n\r\n    this.triggerChange(values)\r\n  }\r\n\r\n  onKeyDown = (e) => {\r\n    const index = parseInt(e.target.dataset.id)\r\n    const prevIndex = index - 1\r\n    const nextIndex = index + 1\r\n    const prev = this.iRefs[prevIndex]\r\n    const next = this.iRefs[nextIndex]\r\n    switch (e.keyCode) {\r\n      case KEY_CODE.backspace:\r\n        e.preventDefault()\r\n        const vals = [...this.state.values]\r\n        if (this.state.values[index]) {\r\n          vals[index] = ''\r\n          this.setState({ values: vals })\r\n          this.triggerChange(vals)\r\n        } else if (prev) {\r\n          vals[prevIndex] = ''\r\n          prev.current.focus()\r\n          this.setState({ values: vals })\r\n          this.triggerChange(vals)\r\n        }\r\n        break\r\n      case KEY_CODE.left:\r\n        e.preventDefault()\r\n        if (prev) {\r\n          prev.current.focus()\r\n        }\r\n        break\r\n      case KEY_CODE.right:\r\n        e.preventDefault()\r\n        if (next) {\r\n          next.current.focus()\r\n        }\r\n        break\r\n      case KEY_CODE.up:\r\n      case KEY_CODE.down:\r\n        e.preventDefault()\r\n        break\r\n      default:\r\n        // this.handleKeys[index] = true;\r\n        break\r\n    }\r\n  }\r\n\r\n  // onKeyUp = e => {\r\n  //   const index = parseInt(e.target.dataset.id);\r\n  //   if (this.handleKeys[index]) {\r\n  //     this.handleKeys[index] = false;\r\n  //     const next = this.iRefs[index + 1];\r\n  //     if (next) {\r\n  //       next.current.focus();\r\n  //     }\r\n  //   }\r\n  // };\r\n\r\n  onFocus = (e) => {\r\n    e.target.select(e)\r\n  }\r\n\r\n  render() {\r\n    const { values, autoFocusIndex } = this.state\r\n    const {\r\n      loading,\r\n      title,\r\n      fieldHeight,\r\n      fieldWidth,\r\n      fields,\r\n      autoFocus,\r\n      className,\r\n      type,\r\n    } = this.props\r\n    const INPUT_STYLE = {\r\n      width: fieldWidth,\r\n      height: fieldHeight,\r\n      border: 'solid 1px',\r\n      margin: '0 10px',\r\n      borderRadius: '13px',\r\n    }\r\n    const ROOT_STYLE = {\r\n      width: fields * fieldWidth + 100,\r\n      margin: '26px 0',\r\n    }\r\n    const LOADING_STYLE = {\r\n      lineHeight: `${fieldHeight}px`,\r\n    }\r\n    return (\r\n      <div\r\n        className={`${styles['react-code-input-container']} ${className}`}\r\n        style={ROOT_STYLE}\r\n      >\r\n        {title && <p className={styles['title']}>{title}</p>}\r\n        <div className={styles['react-code-input']}>\r\n          {values.map((value, index) => (\r\n            <input\r\n              type={type === 'number' ? 'tel' : type}\r\n              pattern={type === 'number' ? '[0-9]*' : null}\r\n              autoFocus={autoFocus && index === autoFocusIndex}\r\n              style={INPUT_STYLE}\r\n              key={`${this.id}-${index}`}\r\n              data-id={index}\r\n              value={value}\r\n              id={this.props.id ? `${this.props.id}-${index}` : null}\r\n              ref={this.iRefs[index]}\r\n              onChange={this.onChange}\r\n              onKeyDown={this.onKeyDown}\r\n              // onKeyUp={this.onKeyUp}\r\n              onFocus={this.onFocus}\r\n              disabled={this.props.disabled}\r\n              required={this.props.required}\r\n              placeholder={this.props.placeholder[index]}\r\n            />\r\n          ))}\r\n        </div>\r\n        {loading && (\r\n          <div className={styles['loading']} style={LOADING_STYLE}>\r\n            <div className={styles['blur']} />\r\n            <svg\r\n              className={styles['spin']}\r\n              viewBox=\"0 0 1024 1024\"\r\n              data-icon=\"loading\"\r\n              width=\"1em\"\r\n              height=\"1em\"\r\n              fill=\"currentColor\"\r\n              aria-hidden=\"true\"\r\n            >\r\n              <path\r\n                fill=\"#006fff\"\r\n                d=\"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z\"\r\n              />\r\n            </svg>\r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}