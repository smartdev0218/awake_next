{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _toConsumableArray from \"E:/projects/4.23/awake-nextjs-refactored1/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"E:/projects/4.23/awake-nextjs-refactored1/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:/projects/4.23/awake-nextjs-refactored1/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"E:/projects/4.23/awake-nextjs-refactored1/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"E:/projects/4.23/awake-nextjs-refactored1/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"E:/projects/4.23/awake-nextjs-refactored1/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:/projects/4.23/awake-nextjs-refactored1/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"E:/projects/4.23/awake-nextjs-refactored1/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"E:\\\\projects\\\\4.23\\\\awake-nextjs-refactored1\\\\src\\\\components\\\\form\\\\verification-form\\\\index.tsx\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './styles.module.css';\nvar KEY_CODE = {\n  backspace: 8,\n  left: 37,\n  up: 38,\n  right: 39,\n  down: 40\n};\n\nvar ReactCodeInput = /*#__PURE__*/function (_Component) {\n  _inherits(ReactCodeInput, _Component);\n\n  var _super = _createSuper(ReactCodeInput);\n\n  function ReactCodeInput(props) {\n    var _this;\n\n    _classCallCheck(this, ReactCodeInput);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"__clearvalues__\", function () {\n      var fields = _this.props.fields;\n\n      _this.setState({\n        values: Array(fields).fill('')\n      });\n\n      _this.iRefs[0].current.focus();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"triggerChange\", function () {\n      var values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.state.values;\n      var _this$props = _this.props,\n          onChange = _this$props.onChange,\n          onComplete = _this$props.onComplete,\n          fields = _this$props.fields;\n      var val = values.join('');\n      onChange && onChange(val);\n\n      if (onComplete && val.length >= fields) {\n        onComplete(val);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChange\", function (e) {\n      var index = parseInt(e.target.dataset.id);\n\n      if (_this.props.type === 'number') {\n        e.target.value = e.target.value.replace(/[^\\d]/gi, '');\n      } // this.handleKeys[index] = false;\n\n\n      if (e.target.value === '' || _this.props.type === 'number' && !e.target.validity.valid) {\n        return;\n      }\n\n      var fields = _this.props.fields;\n      var next;\n      var value = e.target.value;\n      var values = _this.state.values;\n      values = Object.assign([], values);\n\n      if (value.length > 1) {\n        var nextIndex = value.length + index - 1;\n\n        if (nextIndex >= fields) {\n          nextIndex = fields - 1;\n        }\n\n        next = _this.iRefs[nextIndex];\n        var split = value.split('');\n        split.forEach(function (item, i) {\n          var cursor = index + i;\n\n          if (cursor < fields) {\n            values[cursor] = item;\n          }\n        });\n\n        _this.setState({\n          values: values\n        });\n      } else {\n        next = _this.iRefs[index + 1];\n        values[index] = value;\n\n        _this.setState({\n          values: values\n        });\n      }\n\n      if (next) {\n        next.current.focus();\n        next.current.select();\n      }\n\n      _this.triggerChange(values);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onKeyDown\", function (e) {\n      var index = parseInt(e.target.dataset.id);\n      var prevIndex = index - 1;\n      var nextIndex = index + 1;\n      var prev = _this.iRefs[prevIndex];\n      var next = _this.iRefs[nextIndex];\n\n      switch (e.keyCode) {\n        case KEY_CODE.backspace:\n          e.preventDefault();\n\n          var vals = _toConsumableArray(_this.state.values);\n\n          if (_this.state.values[index]) {\n            vals[index] = '';\n\n            _this.setState({\n              values: vals\n            });\n\n            _this.triggerChange(vals);\n          } else if (prev) {\n            vals[prevIndex] = '';\n            prev.current.focus();\n\n            _this.setState({\n              values: vals\n            });\n\n            _this.triggerChange(vals);\n          }\n\n          break;\n\n        case KEY_CODE.left:\n          e.preventDefault();\n\n          if (prev) {\n            prev.current.focus();\n          }\n\n          break;\n\n        case KEY_CODE.right:\n          e.preventDefault();\n\n          if (next) {\n            next.current.focus();\n          }\n\n          break;\n\n        case KEY_CODE.up:\n        case KEY_CODE.down:\n          e.preventDefault();\n          break;\n\n        default:\n          // this.handleKeys[index] = true;\n          break;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFocus\", function (e) {\n      e.target.select(e);\n    });\n\n    var _fields = props.fields,\n        _values = props.values;\n\n    var _vals;\n\n    console.log(_fields);\n    var autoFocusIndex = 0;\n\n    if (_values && _values.length) {\n      _vals = [];\n\n      for (var i = 0; i < _fields; i++) {\n        _vals.push(_values[i] || '');\n      }\n\n      autoFocusIndex = _values.length >= _fields ? 0 : _values.length;\n    } else {\n      _vals = Array(_fields).fill('');\n    }\n\n    _this.state = {\n      values: _vals,\n      autoFocusIndex: autoFocusIndex\n    };\n    _this.iRefs = [];\n\n    for (var _i = 0; _i < _fields; _i++) {\n      _this.iRefs.push( /*#__PURE__*/React.createRef());\n    }\n\n    _this.id = +new Date(); // this.handleKeys = Array(fields).fill(false);\n\n    return _this;\n  }\n  /**\r\n   * Clear all field value & focus first field\r\n   */\n\n\n  _createClass(ReactCodeInput, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          values = _this$state.values,\n          autoFocusIndex = _this$state.autoFocusIndex;\n      var _this$props2 = this.props,\n          loading = _this$props2.loading,\n          title = _this$props2.title,\n          fieldHeight = _this$props2.fieldHeight,\n          fieldWidth = _this$props2.fieldWidth,\n          fields = _this$props2.fields,\n          autoFocus = _this$props2.autoFocus,\n          className = _this$props2.className,\n          type = _this$props2.type;\n      var INPUT_STYLE = {\n        width: fieldWidth,\n        height: fieldHeight,\n        border: 'solid 1px',\n        margin: '0 10px',\n        borderRadius: '13px'\n      };\n      var ROOT_STYLE = {\n        width: fields * fieldWidth + 100,\n        margin: '26px 0'\n      };\n      var LOADING_STYLE = {\n        lineHeight: \"\".concat(fieldHeight, \"px\")\n      };\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\".concat(styles['react-code-input-container'], \" \").concat(className),\n        style: ROOT_STYLE,\n        children: [title && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles['title'],\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles['react-code-input'],\n          children: values.map(function (value, index) {\n            return /*#__PURE__*/_jsxDEV(\"input\", {\n              type: type === 'number' ? 'tel' : type,\n              pattern: type === 'number' ? '[0-9]*' : null,\n              autoFocus: autoFocus && index === autoFocusIndex,\n              style: INPUT_STYLE,\n              \"data-id\": index,\n              value: value,\n              id: _this2.props.id ? \"\".concat(_this2.props.id, \"-\").concat(index) : null,\n              ref: _this2.iRefs[index],\n              onChange: _this2.onChange,\n              onKeyDown: _this2.onKeyDown // onKeyUp={this.onKeyUp}\n              ,\n              onFocus: _this2.onFocus,\n              disabled: _this2.props.disabled,\n              required: _this2.props.required,\n              placeholder: _this2.props.placeholder[index]\n            }, \"\".concat(_this2.id, \"-\").concat(index), false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 13\n            }, _this2);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 9\n        }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles['loading'],\n          style: LOADING_STYLE,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles['blur']\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: styles['spin'],\n            viewBox: \"0 0 1024 1024\",\n            \"data-icon\": \"loading\",\n            width: \"1em\",\n            height: \"1em\",\n            fill: \"currentColor\",\n            \"aria-hidden\": \"true\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              fill: \"#006fff\",\n              d: \"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return ReactCodeInput;\n}(Component);\n\n_defineProperty(ReactCodeInput, \"propTypes\", {\n  type: PropTypes.oneOf(['text', 'number']),\n  onChange: PropTypes.func,\n  onComplete: PropTypes.func,\n  fields: PropTypes.number,\n  loading: PropTypes.bool,\n  title: PropTypes.string,\n  fieldWidth: PropTypes.number,\n  id: PropTypes.string,\n  fieldHeight: PropTypes.number,\n  autoFocus: PropTypes.bool,\n  className: PropTypes.string,\n  values: PropTypes.arrayOf(PropTypes.string),\n  disabled: PropTypes.bool,\n  required: PropTypes.bool,\n  placeholder: PropTypes.arrayOf(PropTypes.string)\n});\n\n_defineProperty(ReactCodeInput, \"defaultProps\", {\n  type: 'number',\n  fields: 6,\n  fieldWidth: 58,\n  fieldHeight: 54,\n  autoFocus: true,\n  disabled: false,\n  required: false,\n  placeholder: []\n});\n\nexport { ReactCodeInput as default };","map":{"version":3,"sources":["E:/projects/4.23/awake-nextjs-refactored1/src/components/form/verification-form/index.tsx"],"names":["React","Component","PropTypes","styles","KEY_CODE","backspace","left","up","right","down","ReactCodeInput","props","fields","setState","values","Array","fill","iRefs","current","focus","state","onChange","onComplete","val","join","length","e","index","parseInt","target","dataset","id","type","value","replace","validity","valid","next","Object","assign","nextIndex","split","forEach","item","i","cursor","select","triggerChange","prevIndex","prev","keyCode","preventDefault","vals","console","log","autoFocusIndex","push","createRef","Date","loading","title","fieldHeight","fieldWidth","autoFocus","className","INPUT_STYLE","width","height","border","margin","borderRadius","ROOT_STYLE","LOADING_STYLE","lineHeight","map","onKeyDown","onFocus","disabled","required","placeholder","oneOf","func","number","bool","string","arrayOf"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport styles from './styles.module.css'\r\n\r\nconst KEY_CODE = {\r\n  backspace: 8,\r\n  left: 37,\r\n  up: 38,\r\n  right: 39,\r\n  down: 40,\r\n}\r\n\r\nexport default class ReactCodeInput extends Component {\r\n  static propTypes = {\r\n    type: PropTypes.oneOf(['text', 'number']),\r\n    onChange: PropTypes.func,\r\n    onComplete: PropTypes.func,\r\n    fields: PropTypes.number,\r\n    loading: PropTypes.bool,\r\n    title: PropTypes.string,\r\n    fieldWidth: PropTypes.number,\r\n    id: PropTypes.string,\r\n    fieldHeight: PropTypes.number,\r\n    autoFocus: PropTypes.bool,\r\n    className: PropTypes.string,\r\n    values: PropTypes.arrayOf(PropTypes.string),\r\n    disabled: PropTypes.bool,\r\n    required: PropTypes.bool,\r\n    placeholder: PropTypes.arrayOf(PropTypes.string),\r\n  }\r\n\r\n  static defaultProps = {\r\n    type: 'number',\r\n    fields: 6,\r\n    fieldWidth: 58,\r\n    fieldHeight: 54,\r\n    autoFocus: true,\r\n    disabled: false,\r\n    required: false,\r\n    placeholder: [],\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    const { fields, values } = props\r\n    let vals\r\n    console.log(fields)\r\n    let autoFocusIndex = 0\r\n    if (values && values.length) {\r\n      vals = []\r\n      for (let i = 0; i < fields; i++) {\r\n        vals.push(values[i] || '')\r\n      }\r\n      autoFocusIndex = values.length >= fields ? 0 : values.length\r\n    } else {\r\n      vals = Array(fields).fill('')\r\n    }\r\n    this.state = { values: vals, autoFocusIndex }\r\n\r\n    this.iRefs = []\r\n    for (let i = 0; i < fields; i++) {\r\n      this.iRefs.push(React.createRef())\r\n    }\r\n    this.id = +new Date()\r\n\r\n    // this.handleKeys = Array(fields).fill(false);\r\n  }\r\n\r\n  /**\r\n   * Clear all field value & focus first field\r\n   */\r\n  __clearvalues__ = () => {\r\n    const { fields } = this.props\r\n    this.setState({ values: Array(fields).fill('') })\r\n    this.iRefs[0].current.focus()\r\n  }\r\n\r\n  triggerChange = (values = this.state.values) => {\r\n    const { onChange, onComplete, fields } = this.props\r\n    const val = values.join('')\r\n    onChange && onChange(val)\r\n    if (onComplete && val.length >= fields) {\r\n      onComplete(val)\r\n    }\r\n  }\r\n\r\n  onChange = (e) => {\r\n    const index = parseInt(e.target.dataset.id)\r\n    if (this.props.type === 'number') {\r\n      e.target.value = e.target.value.replace(/[^\\d]/gi, '')\r\n    }\r\n    // this.handleKeys[index] = false;\r\n    if (\r\n      e.target.value === '' ||\r\n      (this.props.type === 'number' && !e.target.validity.valid)\r\n    ) {\r\n      return\r\n    }\r\n    const { fields } = this.props\r\n    let next\r\n    const value = e.target.value\r\n    let { values } = this.state\r\n    values = Object.assign([], values)\r\n    if (value.length > 1) {\r\n      let nextIndex = value.length + index - 1\r\n      if (nextIndex >= fields) {\r\n        nextIndex = fields - 1\r\n      }\r\n      next = this.iRefs[nextIndex]\r\n      const split = value.split('')\r\n      split.forEach((item, i) => {\r\n        const cursor = index + i\r\n        if (cursor < fields) {\r\n          values[cursor] = item\r\n        }\r\n      })\r\n      this.setState({ values })\r\n    } else {\r\n      next = this.iRefs[index + 1]\r\n      values[index] = value\r\n      this.setState({ values })\r\n    }\r\n\r\n    if (next) {\r\n      next.current.focus()\r\n      next.current.select()\r\n    }\r\n\r\n    this.triggerChange(values)\r\n  }\r\n\r\n  onKeyDown = (e) => {\r\n    const index = parseInt(e.target.dataset.id)\r\n    const prevIndex = index - 1\r\n    const nextIndex = index + 1\r\n    const prev = this.iRefs[prevIndex]\r\n    const next = this.iRefs[nextIndex]\r\n    switch (e.keyCode) {\r\n      case KEY_CODE.backspace:\r\n        e.preventDefault()\r\n        const vals = [...this.state.values]\r\n        if (this.state.values[index]) {\r\n          vals[index] = ''\r\n          this.setState({ values: vals })\r\n          this.triggerChange(vals)\r\n        } else if (prev) {\r\n          vals[prevIndex] = ''\r\n          prev.current.focus()\r\n          this.setState({ values: vals })\r\n          this.triggerChange(vals)\r\n        }\r\n        break\r\n      case KEY_CODE.left:\r\n        e.preventDefault()\r\n        if (prev) {\r\n          prev.current.focus()\r\n        }\r\n        break\r\n      case KEY_CODE.right:\r\n        e.preventDefault()\r\n        if (next) {\r\n          next.current.focus()\r\n        }\r\n        break\r\n      case KEY_CODE.up:\r\n      case KEY_CODE.down:\r\n        e.preventDefault()\r\n        break\r\n      default:\r\n        // this.handleKeys[index] = true;\r\n        break\r\n    }\r\n  }\r\n\r\n  // onKeyUp = e => {\r\n  //   const index = parseInt(e.target.dataset.id);\r\n  //   if (this.handleKeys[index]) {\r\n  //     this.handleKeys[index] = false;\r\n  //     const next = this.iRefs[index + 1];\r\n  //     if (next) {\r\n  //       next.current.focus();\r\n  //     }\r\n  //   }\r\n  // };\r\n\r\n  onFocus = (e) => {\r\n    e.target.select(e)\r\n  }\r\n\r\n  render() {\r\n    const { values, autoFocusIndex } = this.state\r\n    const {\r\n      loading,\r\n      title,\r\n      fieldHeight,\r\n      fieldWidth,\r\n      fields,\r\n      autoFocus,\r\n      className,\r\n      type,\r\n    } = this.props\r\n    const INPUT_STYLE = {\r\n      width: fieldWidth,\r\n      height: fieldHeight,\r\n      border: 'solid 1px',\r\n      margin: '0 10px',\r\n      borderRadius: '13px',\r\n    }\r\n    const ROOT_STYLE = {\r\n      width: fields * fieldWidth + 100,\r\n      margin: '26px 0',\r\n    }\r\n    const LOADING_STYLE = {\r\n      lineHeight: `${fieldHeight}px`,\r\n    }\r\n    return (\r\n      <div\r\n        className={`${styles['react-code-input-container']} ${className}`}\r\n        style={ROOT_STYLE}\r\n      >\r\n        {title && <p className={styles['title']}>{title}</p>}\r\n        <div className={styles['react-code-input']}>\r\n          {values.map((value, index) => (\r\n            <input\r\n              type={type === 'number' ? 'tel' : type}\r\n              pattern={type === 'number' ? '[0-9]*' : null}\r\n              autoFocus={autoFocus && index === autoFocusIndex}\r\n              style={INPUT_STYLE}\r\n              key={`${this.id}-${index}`}\r\n              data-id={index}\r\n              value={value}\r\n              id={this.props.id ? `${this.props.id}-${index}` : null}\r\n              ref={this.iRefs[index]}\r\n              onChange={this.onChange}\r\n              onKeyDown={this.onKeyDown}\r\n              // onKeyUp={this.onKeyUp}\r\n              onFocus={this.onFocus}\r\n              disabled={this.props.disabled}\r\n              required={this.props.required}\r\n              placeholder={this.props.placeholder[index]}\r\n            />\r\n          ))}\r\n        </div>\r\n        {loading && (\r\n          <div className={styles['loading']} style={LOADING_STYLE}>\r\n            <div className={styles['blur']} />\r\n            <svg\r\n              className={styles['spin']}\r\n              viewBox=\"0 0 1024 1024\"\r\n              data-icon=\"loading\"\r\n              width=\"1em\"\r\n              height=\"1em\"\r\n              fill=\"currentColor\"\r\n              aria-hidden=\"true\"\r\n            >\r\n              <path\r\n                fill=\"#006fff\"\r\n                d=\"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z\"\r\n              />\r\n            </svg>\r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}