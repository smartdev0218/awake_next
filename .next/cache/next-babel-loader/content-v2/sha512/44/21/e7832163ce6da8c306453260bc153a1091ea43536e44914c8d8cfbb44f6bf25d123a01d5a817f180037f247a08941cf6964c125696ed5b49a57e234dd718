{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\projects\\\\4.23\\\\awake-nextjs-refactored1\\\\src\\\\components\\\\common\\\\loading\\\\index.tsx\";\nimport React, { useEffect, useState } from 'react';\nimport { Player } from '@lottiefiles/react-lottie-player';\nimport cookieCutter from 'cookie-cutter';\nimport { useAuth } from 'context/auth';\nimport { findDevServerUrl, loadedUrl } from 'utils/axios-client';\nimport loadingAnimation from './loading-animation.json';\n/**\r\n * App Loading screen.\r\n */\n\nconst Loading = ({\n  children\n}) => {\n  const {\n    0: isAuthLoaded,\n    1: setAuthLoaded\n  } = useState(false);\n  const {\n    jwt,\n    fetchUser,\n    logout\n  } = useAuth();\n  useEffect(() => {\n    findDevServerUrl().then(url => {\n      cookieCutter.set('server-url', url);\n      return;\n    }).finally(() => {\n      setAuthLoaded(true);\n\n      if (loadedUrl) {\n        if (jwt) {\n          fetchUser();\n        }\n      }\n    }).catch(e => {\n      var _e$response, _e$response$data;\n\n      console.error('Error on load', e);\n\n      if ((e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.statusCode) === 'unauthorised') {\n        logout(); // dispatchModal({\n        //     type: 'add',\n        //     modal: <ModalError text={getLanguage().youWereLoggedOut} />\n        // })\n      }\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: isAuthLoaded ? children : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"centerLoading\",\n      children: /*#__PURE__*/_jsxDEV(Player, {\n        autoplay: true,\n        loop: true,\n        src: loadingAnimation,\n        style: {\n          height: 400,\n          width: 400\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\n\nexport default Loading;","map":{"version":3,"sources":["E:/projects/4.23/awake-nextjs-refactored1/src/components/common/loading/index.tsx"],"names":["React","useEffect","useState","Player","cookieCutter","useAuth","findDevServerUrl","loadedUrl","loadingAnimation","Loading","children","isAuthLoaded","setAuthLoaded","jwt","fetchUser","logout","then","url","set","finally","catch","e","console","error","response","data","statusCode","height","width"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,MAAT,QAAuB,kCAAvB;AACA,OAAOC,YAAP,MAAyB,eAAzB;AAEA,SAASC,OAAT,QAAwB,cAAxB;AACA,SAASC,gBAAT,EAA2BC,SAA3B,QAA4C,oBAA5C;AAEA,OAAOC,gBAAP,MAA6B,0BAA7B;AAEA;AACA;AACA;;AACA,MAAMC,OAAO,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAuB;AACrC,QAAM;AAAA,OAACC,YAAD;AAAA,OAAeC;AAAf,MAAgCV,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAM;AAAEW,IAAAA,GAAF;AAAOC,IAAAA,SAAP;AAAkBC,IAAAA;AAAlB,MAA6BV,OAAO,EAA1C;AAEAJ,EAAAA,SAAS,CAAC,MAAM;AACdK,IAAAA,gBAAgB,GACbU,IADH,CACSC,GAAD,IAAS;AACbb,MAAAA,YAAY,CAACc,GAAb,CAAiB,YAAjB,EAA+BD,GAA/B;AACA;AACD,KAJH,EAKGE,OALH,CAKW,MAAM;AACbP,MAAAA,aAAa,CAAC,IAAD,CAAb;;AACA,UAAIL,SAAJ,EAAe;AACb,YAAIM,GAAJ,EAAS;AACPC,UAAAA,SAAS;AACV;AACF;AACF,KAZH,EAaGM,KAbH,CAaUC,CAAD,IAAO;AAAA;;AACZC,MAAAA,OAAO,CAACC,KAAR,CAAc,eAAd,EAA+BF,CAA/B;;AACA,UAAI,CAAAA,CAAC,SAAD,IAAAA,CAAC,WAAD,2BAAAA,CAAC,CAAEG,QAAH,gFAAaC,IAAb,sEAAmBC,UAAnB,MAAkC,cAAtC,EAAsD;AACpDX,QAAAA,MAAM,GAD8C,CAEpD;AACA;AACA;AACA;AACD;AACF,KAtBH;AAuBD,GAxBQ,EAwBN,EAxBM,CAAT;AA0BA,sBACE;AAAA,cACGJ,YAAY,GACXD,QADW,gBAGX;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA,6BACE,QAAC,MAAD;AACE,QAAA,QAAQ,MADV;AAEE,QAAA,IAAI,MAFN;AAGE,QAAA,GAAG,EAAEF,gBAHP;AAIE,QAAA,KAAK,EAAE;AACLmB,UAAAA,MAAM,EAAE,GADH;AAELC,UAAAA,KAAK,EAAE;AAFF;AAJT;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAJJ;AAAA;AAAA;AAAA;AAAA,UADF;AAmBD,CAjDD;;AAmDA,eAAenB,OAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { Player } from '@lottiefiles/react-lottie-player'\r\nimport cookieCutter from 'cookie-cutter'\r\n\r\nimport { useAuth } from 'context/auth'\r\nimport { findDevServerUrl, loadedUrl } from 'utils/axios-client'\r\n\r\nimport loadingAnimation from './loading-animation.json'\r\n\r\n/**\r\n * App Loading screen.\r\n */\r\nconst Loading = ({ children }: any) => {\r\n  const [isAuthLoaded, setAuthLoaded] = useState(false)\r\n  const { jwt, fetchUser, logout } = useAuth()\r\n\r\n  useEffect(() => {\r\n    findDevServerUrl()\r\n      .then((url) => {\r\n        cookieCutter.set('server-url', url)\r\n        return\r\n      })\r\n      .finally(() => {\r\n        setAuthLoaded(true)\r\n        if (loadedUrl) {\r\n          if (jwt) {\r\n            fetchUser()\r\n          }\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error('Error on load', e)\r\n        if (e?.response?.data?.statusCode === 'unauthorised') {\r\n          logout()\r\n          // dispatchModal({\r\n          //     type: 'add',\r\n          //     modal: <ModalError text={getLanguage().youWereLoggedOut} />\r\n          // })\r\n        }\r\n      })\r\n  }, [])\r\n\r\n  return (\r\n    <div>\r\n      {isAuthLoaded ? (\r\n        children\r\n      ) : (\r\n        <div className=\"centerLoading\">\r\n          <Player\r\n            autoplay\r\n            loop\r\n            src={loadingAnimation}\r\n            style={{\r\n              height: 400,\r\n              width: 400,\r\n            }}\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Loading\r\n"]},"metadata":{},"sourceType":"module"}